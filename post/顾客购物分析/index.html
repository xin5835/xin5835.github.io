<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>é¡¾å®¢è´­ç‰©åˆ†æ | Robert&#39;s Blog</title>
<meta name="keywords" content="Python">
<meta name="description" content="é¡¾å®¢è´­ç‰©æ•°æ®æ¸…æ´—ã€å¯è§†åŒ–å’Œèšç±»åˆ†æ.
å¯è§†åŒ–å›¾ç‰‡å’Œipybæ–‡ä»¶ï¼Œè¯¦è§! [Github] (https://github.com/xin5835/customer_shopping_analysis)">
<meta name="author" content="">
<link rel="canonical" href="https://xin5835.github.io/post/%E9%A1%BE%E5%AE%A2%E8%B4%AD%E7%89%A9%E5%88%86%E6%9E%90/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.9d4ae320f369fb3d9080028170995128a56b893318ee102de7fd970c86bd7be2.css" integrity="sha256-nUrjIPNp&#43;z2QgAKBcJlRKKVriTMY7hAt5/2XDIa9e&#43;I=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://xin5835.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://xin5835.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://xin5835.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://xin5835.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://xin5835.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://xin5835.github.io/post/%E9%A1%BE%E5%AE%A2%E8%B4%AD%E7%89%A9%E5%88%86%E6%9E%90/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.css" integrity="sha384-bYdxxUwYipFNohQlHt0bjN/LCpueqWz13HufFEV1SUatKs1cm4L6fFgCi1jT643X" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.js" integrity="sha384-Qsn9KnoKISj6dI8g7p1HBlNpVx0I8p1SvlwOldgi3IorMle61nQy4zEahWYtljaz" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          
          
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false},
              {left: '\\(', right: '\\)', display: false},
              {left: '\\[', right: '\\]', display: true}
          ],
          
          throwOnError : false
        });
    });
</script>

<meta property="og:url" content="https://xin5835.github.io/post/%E9%A1%BE%E5%AE%A2%E8%B4%AD%E7%89%A9%E5%88%86%E6%9E%90/">
  <meta property="og:site_name" content="Robert&#39;s Blog">
  <meta property="og:title" content="é¡¾å®¢è´­ç‰©åˆ†æ">
  <meta property="og:description" content="é¡¾å®¢è´­ç‰©æ•°æ®æ¸…æ´—ã€å¯è§†åŒ–å’Œèšç±»åˆ†æ.
å¯è§†åŒ–å›¾ç‰‡å’Œipybæ–‡ä»¶ï¼Œè¯¦è§! [Github] (https://github.com/xin5835/customer_shopping_analysis)">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2022-12-28T11:18:15+08:00">
    <meta property="article:modified_time" content="2022-12-28T11:18:15+08:00">
    <meta property="article:tag" content="Python">
    <meta property="og:image" content="https://xin5835.github.io/images/RepeatCustomer.jpeg">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://xin5835.github.io/images/RepeatCustomer.jpeg">
<meta name="twitter:title" content="é¡¾å®¢è´­ç‰©åˆ†æ">
<meta name="twitter:description" content="é¡¾å®¢è´­ç‰©æ•°æ®æ¸…æ´—ã€å¯è§†åŒ–å’Œèšç±»åˆ†æ.
å¯è§†åŒ–å›¾ç‰‡å’Œipybæ–‡ä»¶ï¼Œè¯¦è§! [Github] (https://github.com/xin5835/customer_shopping_analysis)">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://xin5835.github.io/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "é¡¾å®¢è´­ç‰©åˆ†æ",
      "item": "https://xin5835.github.io/post/%E9%A1%BE%E5%AE%A2%E8%B4%AD%E7%89%A9%E5%88%86%E6%9E%90/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "é¡¾å®¢è´­ç‰©åˆ†æ",
  "name": "é¡¾å®¢è´­ç‰©åˆ†æ",
  "description": "é¡¾å®¢è´­ç‰©æ•°æ®æ¸…æ´—ã€å¯è§†åŒ–å’Œèšç±»åˆ†æ.\nå¯è§†åŒ–å›¾ç‰‡å’Œipybæ–‡ä»¶ï¼Œè¯¦è§! [Github] (https://github.com/xin5835/customer_shopping_analysis)\n",
  "keywords": [
    "Python"
  ],
  "articleBody": "é¡¾å®¢è´­ç‰©æ•°æ®æ¸…æ´—ã€å¯è§†åŒ–å’Œèšç±»åˆ†æ.\nå¯è§†åŒ–å›¾ç‰‡å’Œipybæ–‡ä»¶ï¼Œè¯¦è§! [Github] (https://github.com/xin5835/customer_shopping_analysis)\nå¯¼å…¥åº“\nimport numpy as np import pandas as pd import datetime from matplotlib import pyplot as plt import seaborn as sns plt.style.use(['fivethirtyeight']) from sklearn.preprocessing import LabelEncoder from sklearn.preprocessing import StandardScaler from sklearn import metrics from sklearn.decomposition import PCA from sklearn.cluster import KMeans from sklearn.cluster import AgglomerativeClustering from yellowbrick.cluster import KElbowVisualizer import warnings warnings.filterwarnings('ignore') åŠ è½½æ•°æ® data = pd.read_csv('/Users/robert/python/marketing_campaign.csv', sep= '\\t') data.info() data.head().T æ•°æ®å‡†å¤‡ æ•°æ®ç»´åº¦è¯´æ˜ åˆ†ç±» åˆ—å è¯´æ˜ ç”¨æˆ·å±æ€§ ID ç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†ç¬¦ ç”¨æˆ·å±æ€§ Year_Birth ç”¨æˆ·çš„å‡ºç”Ÿå¹´ä»½ ç”¨æˆ·å±æ€§ Education æ•™è‚²æ°´å¹³ ç”¨æˆ·å±æ€§ Marital_Status å©šå§»çŠ¶å†µ ç”¨æˆ·å±æ€§ Income å¹´å®¶åº­æ”¶å…¥ ç”¨æˆ·å±æ€§ Kidhome å„¿ç«¥æ•°é‡ ç”¨æˆ·å±æ€§ Teenhome é’å°‘å¹´äººæ•° ç”¨æˆ·å¥åº·åº¦ Dt_Customer é¡¾å®¢æ³¨å†Œçš„æ—¥æœŸ ç”¨æˆ·å¥åº·åº¦ Recency è‡ªç”¨æˆ·ä¸Šæ¬¡è´­ä¹°ä»¥æ¥çš„å¤©æ•° ç”¨æˆ·å¥åº·åº¦ NumWebVisitsMonth ä¸Šä¸ªæœˆè®¿é—®å…¬å¸ç½‘ç«™çš„æ¬¡æ•° ç”¨æˆ·å¥åº·åº¦ Complain å¦‚æœç”¨æˆ·åœ¨è¿‡å» 2 å¹´å†…æŠ•è¯‰ï¼Œåˆ™ä¸º 1ï¼Œå¦åˆ™ä¸º 0 äº¤æ˜“ä¿¡æ¯ MntWines è¿‡å»ä¸¤å¹´åœ¨è‘¡è„é…’ä¸Šçš„æ¶ˆè´¹é‡‘é¢ äº¤æ˜“ä¿¡æ¯ MntFruits è¿‡å»ä¸¤å¹´åœ¨æ°´æœä¸Šçš„èŠ±è´¹ äº¤æ˜“ä¿¡æ¯ MntMeatProducts è¿‡å»2å¹´è‚‰ç±»æ¶ˆè´¹é‡ äº¤æ˜“ä¿¡æ¯ MntFishProducts è¿‡å»2å¹´åœ¨é±¼ä¸ŠèŠ±è´¹çš„é‡‘é¢ äº¤æ˜“ä¿¡æ¯ MntSweetProducts è¿‡å»2å¹´åœ¨ç³–æœä¸ŠèŠ±è´¹çš„é‡‘é¢ äº¤æ˜“ä¿¡æ¯ MntGoldProds è¿‡å»2å¹´åœ¨é»„é‡‘ä¸ŠèŠ±è´¹çš„é‡‘é¢ äº¤æ˜“æ¥æº NumWebPurchases é€šè¿‡å…¬å¸ç½‘ç«™è¿›è¡Œçš„è´­ä¹°æ•°é‡ äº¤æ˜“æ¥æº NumCatalogPurchases ä½¿ç”¨ç›®å½•è¿›è¡Œçš„è´­ä¹°æ•°é‡ äº¤æ˜“æ¥æº NumStorePurchases ç›´æ¥åœ¨å•†åº—è´­ä¹°çš„æ•°é‡ è¿è¥è½¬åŒ–ä¿¡æ¯ NumDealsPurchases æ‰“æŠ˜çš„è´­ä¹°æ¬¡æ•° è¿è¥è½¬åŒ–ä¿¡æ¯ AcceptedCmp1 å¦‚æœç”¨æˆ·åœ¨ç¬¬ä¸€ä¸ªæ´»åŠ¨ä¸­æ¥å—äº†æŠ¥ä»·ï¼Œåˆ™ä¸º 1ï¼Œå¦åˆ™ä¸º 0 è¿è¥è½¬åŒ–ä¿¡æ¯ AcceptedCmp2 å¦‚æœç”¨æˆ·åœ¨ç¬¬äºŒä¸ªæ´»åŠ¨ä¸­æ¥å—äº†æŠ¥ä»·ï¼Œåˆ™ä¸º 1ï¼Œå¦åˆ™ä¸º 0 è¿è¥è½¬åŒ–ä¿¡æ¯ AcceptedCmp3 å¦‚æœç”¨æˆ·åœ¨ç¬¬ä¸‰ä¸ªæ´»åŠ¨ä¸­æ¥å—äº†æŠ¥ä»·ï¼Œåˆ™ä¸º 1ï¼Œå¦åˆ™ä¸º 0 è¿è¥è½¬åŒ–ä¿¡æ¯ AcceptedCmp4 å¦‚æœç”¨æˆ·åœ¨ç¬¬ 4 ä¸ªæ´»åŠ¨ä¸­æ¥å—äº†æŠ¥ä»·ï¼Œåˆ™ä¸º 1ï¼Œå¦åˆ™ä¸º 0 è¿è¥è½¬åŒ–ä¿¡æ¯ AcceptedCmp5 å¦‚æœç”¨æˆ·åœ¨ç¬¬ 5 ä¸ªæ´»åŠ¨ä¸­æ¥å—äº†æŠ¥ä»·ï¼Œåˆ™ä¸º 1ï¼Œå¦åˆ™ä¸º 0 è¿è¥è½¬åŒ–ä¿¡æ¯ Response å¦‚æœç”¨æˆ·åœ¨ä¸Šæ¬¡æ´»åŠ¨ä¸­æ¥å—äº†æŠ¥ä»·ï¼Œåˆ™ä¸º 1ï¼Œå¦åˆ™ä¸º 0 Z_CostContact Z_æˆæœ¬è”ç³»æ–¹å¼ Z_Revenue Z_æ”¶å…¥ ## æ£€æŸ¥ç¼ºå¤±å€¼ print(\"ç¼ºå¤±å€¼:\\n\", data.isnull().sum()) ## æ”¶å…¥æ•°æ®æœ‰ç¼ºå¤±å€¼ï¼Œç¼ºå¤±äº†24æ¡æ•°æ® ## æ£€æŸ¥æ˜¯å¦æœ‰é‡å¤æ•°æ® data.duplicated().sum() åˆ†ææ€è·¯ï¼š ç›®æ ‡ï¼šæŒ–æ˜æ•°æ®çš„ä»·å€¼ï¼ŒåŠ©åŠ›ä¸šåŠ¡æˆé•¿å’Œç”¨æˆ·å¢é•¿ ç”¨æˆ·ä¿¡æ¯â€”-åšç”¨æˆ·ç”»åƒ ç”¨æˆ·å¥åº·åº¦â€”-åšç”¨æˆ·ä»·å€¼è¯„çº§ äº¤æ˜“ä¿¡æ¯â€“åšæ¨èç®—æ³• äº¤æ˜“æ¥æºâ€”-åšå¢é•¿åˆ†æ è¿è¥è½¬åŒ–â€”-è¯„ä¼°è¿è¥æ´»åŠ¨çš„æ•ˆæœ æ•°æ®æ¸…æ´— æ”¶å…¥æ•°æ®æœ‰24æ¡ç¼ºå¤±å€¼ï¼Œä½¿ç”¨å‡å€¼å¯¹å…¶è¿›è¡Œå¡«å…… é¡¾å®¢æ³¨å†Œæ—¶é—´éœ€è¦è½¬æ¢ä¸ºæ—¥æœŸæ ¼å¼ æ•™è‚²æ°´å¹³å’Œå©šå§»çŠ¶æ€ä¸¤ä¸ªå˜é‡éœ€è¦å¯¹å…¶è¿›è¡Œé‡æ–°ç¼–ç  ## é‡‡ç”¨å‡å€¼å¯¹æ”¶å…¥åˆ—çš„24æ¡ç¼ºå¤±æ•°æ®è¿›è¡Œå¡«å…… data = data.fillna(data['Income'].mean()) ## å°†æ³¨å†Œæ—¥æœŸæ•°æ®æ ¼å¼è°ƒæ•´ä¸ºæ—¥æœŸæ ¼å¼ data['Dt_Customer'] = pd.to_datetime(data['Dt_Customer']) data['Dt_Customer'].apply(['min', 'max']) print(\"å©šå§»çŠ¶å†µ:\\n\", data['Marital_Status'].value_counts(), '\\n') print(\"æ•™è‚²æƒ…å†µ:\\n\", data['Education'].value_counts()) ## ä¸åŒå©šå§»çŠ¶æ€çš„é¡¾å®¢æ‰€å æ¯”ä¾‹ plt.figure(figsize=(9, 9)) x = data['Marital_Status'].value_counts().sort_values() plt.pie(x=x, labels=['YoLo', 'Absurd','Alone', 'Window', 'Divorced', 'Single', 'Together','Married'], autopct = '%1.1f%%', ) plt.axis('equal') plt.title('Propotion of Marital_Status') ## ä¸åŒå—æ•™è‚²æ°´å¹³çš„é¡¾å®¢æ‰€å æ¯”ä¾‹ x = data['Education'].value_counts().sort_values() plt.figure(figsize=(9,9)) plt.pie(x=x, labels=['2n Cycle', 'Basic', 'Master', 'PhD', 'Graduation'], autopct = '%1.1f%%') plt.title('Propotion of Education') æ•°æ®é¢„å¤„ç† åˆ›å»ºæ–°çš„æ•°æ®ç‰¹å¾:\nåˆ©ç”¨å‡ºç”Ÿæ—¥æœŸåˆ›å»ºAgeï¼ˆå¹´é¾„ï¼‰åˆ— åˆ›å»ºSpentï¼ˆæ€»æ¶ˆè´¹ï¼‰åˆ— åˆ›å»ºChildrenï¼ˆå°å­©ï¼‰åˆ— åˆ›å»ºTotalAcceptedCmpï¼ˆæ¥å—æŠ¥ä»·æ¬¡æ•°åˆè®¡ï¼‰åˆ— åˆ›å»ºNumTotalPurchasesï¼ˆæ€»è´­ä¹°æ•°é‡ï¼‰åˆ— data['Age'] = data.apply(lambda data: 2015- data['Year_Birth'], axis=1) data['Spent'] = data.apply(lambda data: data['MntFishProducts'] + data['MntFruits'] + data['MntGoldProds'] + data['MntMeatProducts'] + data['MntSweetProducts'] + data['MntWines'], axis=1) data['Children'] = data.apply(lambda data: data['Kidhome'] + data['Teenhome'], axis=1) data['TotalAcceptedCmp'] = data.apply(lambda data: data['AcceptedCmp1'] + data['AcceptedCmp2'] + data['AcceptedCmp3'] + data['AcceptedCmp4'] + data['AcceptedCmp5'], axis=1) data['NumTotalPurchases'] = data.apply(lambda data: data['NumWebPurchases'] + data['NumCatalogPurchases'] + data['NumStorePurchases'] + data['NumDealsPurchases'], axis=1) ## åˆ é™¤'Year_Birth', 'Z_CostContact', 'Z_Revenue', 'Kidhome', 'Teenhome'åˆ— data = data.drop(['Year_Birth', 'Z_CostContact', 'Z_Revenue', 'Kidhome', 'Teenhome'], axis=1) ## åˆ é™¤æ•°æ®ä¸­æ”¶å…¥å’Œå¹´é¾„çš„å¼‚å¸¸å€¼éƒ¨åˆ† data = data.drop(data.loc[data['Income'] \u003e 600000].index) data = data.drop(data.loc[data['Age'] \u003e 100].index) æ•°æ®å¯è§†åŒ– ## åˆ›å»ºæ–°çš„ç‰¹å¾â€Have_Childrenâ€œï¼Œæœ‰å°å­©å€¼ä¸º1ï¼Œæ²¡æœ‰å°å­©å€¼ä¸º0 data['Have_Children'] = np.where(data.Children \u003e 0, 1, 0) data.head() ## ä»¥æ˜¯å¦æœ‰å°å­©ä¸ºåˆ†ç»„å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ç»˜åˆ¶æ•£ç‚¹å›¾çŸ©é˜µ pairplot = data.loc[:, ['Income', 'Age', 'Spent', 'Recency', 'Have_Children']] sns.pairplot(pairplot, hue='Have_Children', palette='Set1') ## å¯¹è¿ç»­å‹å˜é‡Ageè¿›è¡Œé¢å…ƒåˆ’åˆ† bins = [0, 20, 40, 60, 80,100] aged = pd.cut(data['Age'], bins=bins) print('number of age_cut:\\n', aged.value_counts()) ## ä¸åŒå¹´é¾„æ®µé¡¾å®¢åˆ†ç±»æ±‡æ€» plt.figure(figsize=(12,6)) sns.countplot(y=aged, palette='Set2') plt.title('countplot of Age') ## ä¸åŒå¹´é¾„åŒºé—´åœ¨è´­ç‰©èŠ±è´¹ä¸Šçš„åŒºåˆ« plt.figure(figsize=(12,6)) sns.boxplot(x=aged, y=data['Spent'], palette='Set2') ## å—æ•™è‚²æ°´å¹³å’Œè´­ç‰©èŠ±è´¹é—´çš„å…³ç³» ## ä¸åŒå©šå§»çŠ¶æ€ä¸‹é¡¾å®¢çš„èŠ±è´¹æ¯”è¾ƒ to_boxplot = ['Education', 'Marital_Status'] fig, axes = plt.subplots(2, 1, figsize=(12, 12)) axes = axes.flatten() for col, ax in zip(to_boxplot, axes): ax = sns.boxplot(data=data, x=col, y='Spent', ax=ax, palette='Set2') ax.set_title(f'boxplot of spent by {col}') ## ä»¥æ•™è‚²æ°´å¹³çš„ä¸åŒå¯¹ä¸åŒå©šå§»çŠ¶æ€çš„é¡¾å®¢è¿›è¡Œåˆ†ç»„ï¼Œå¹¶å¯¹æ¯”å…¶åœ¨æ”¶å…¥å’Œè´­ç‰©èŠ±è´¹ä¸Šçš„å·®å¼‚å¯¹æ¯” fig, axes = plt.subplots(2, 1, figsize=(14,10)) sns.barplot(x= 'Marital_Status',y='Income',hue='Education',data=data, ci=0,palette='Set2', ax=axes[0]) sns.barplot(x= 'Marital_Status',y='Spent',hue='Education',data=data, ci=0, palette='Set2', ax=axes[1]) ## æ”¶å…¥å’Œæ”¯å‡ºå‘ˆçº¿æ€§å¢é•¿å…³ç³» fig, axes = plt.subplots(1, 2, figsize=(14,6)) sns.scatterplot(y=data['Spent'], x=data['Income'], ax=axes[0]) sns.regplot(y='Spent', x='Income', data=data, ax=axes[1]) ## ç½‘ç«™é¡¾å®¢æ•´ä½“èŠ±è´¹ç›´æ–¹å›¾ plt.figure(figsize=(12,6)) sns.histplot(data['Spent'], bins=50, kde=True) plt.title('histogram of Spent') ## è‡ªç”¨æˆ·ä¸Šæ¬¡è´­ä¹°ä»¥æ¥çš„å¤©æ•°çš„é¢‘æ•°åˆ†å¸ƒ plt.figure(figsize=(12,6)) sns.histplot(data['Recency'], bins=60) ## ç½‘ç«™ç”¨æˆ·æœˆåº¦æ´»è·ƒé¢‘æ•°ç»Ÿè®¡ plt.figure(figsize=(12,6)) sns.histplot(data['NumWebVisitsMonth'], bins=50, kde=True) plt.title('Monthly activities (5-7)/month') ## ç½‘ç«™æŠ•è¯‰æƒ…å†µ x = data['Complain'].value_counts().sort_values() plt.figure(figsize=(8,8)) plt.pie(x=x, labels=['YES', 'NO'], autopct = '%1.1f%%') plt.title('Complain of customer') ## é…’ã€é±¼ã€æ°´æœã€é»„é‡‘ã€è‚‰ã€ç³–æœå„è‡ªé”€é‡é¢‘æ•°ç»Ÿè®¡ to_histplot = ['MntWines', 'MntFishProducts', 'MntFruits', 'MntGoldProds', 'MntMeatProducts', 'MntSweetProducts'] fig, axes = plt.subplots(3, 2, sharex=True, sharey=True, figsize=(14, 10)) axes = axes.flatten() for col, ax in zip(to_histplot, axes): ax = sns.histplot(data=data, x=col, ax=ax) ax.set_title(f'histogram of {col}') ## é€šè¿‡ç›®å½•ã€å•†åº—å’Œç½‘ç«™ä¸‰ä¸ªæ¸ é“è´­ä¹°çš„é¢‘æ•°ç»Ÿè®¡ to_histplot = ['NumCatalogPurchases', 'NumStorePurchases', 'NumWebPurchases'] fig, axes = plt.subplots(1, 3, sharey=True, figsize=(14, 9)) axes = axes.flatten() for col, ax in zip(to_histplot, axes): ax = sns.histplot(data=data, x=col, ax=ax) plt.subplots_adjust(hspace = 0.5, wspace = 0.3) ## åˆ›å»ºæ€»æ´»åŠ¨æ¥å—æŠ¥ä»·æ¬¡æ•°æŒ‡æ ‡ acceptedConcat = data[['AcceptedCmp1', 'AcceptedCmp2', 'AcceptedCmp3', 'AcceptedCmp4', 'AcceptedCmp5']] acceptedConcat = acceptedConcat.apply(pd.DataFrame.sum) print('acceptedConcat:\\n', acceptedConcat) ## æ¯æ¬¡æ¥å—æ´»åŠ¨æŠ¥ä»·çš„ç”¨æˆ·çš„é¢‘æ•°ç»Ÿè®¡ plt.figure(figsize=(12,6)) plt.title('accepted the campaings in every attempt') sns.barplot(x=acceptedConcat.index, y=acceptedConcat, palette='Set2') ## ç”¨æˆ·ä¸Šæ¬¡è´­ä¹°ä»¥æ¥çš„å¤©æ•°å’Œåœ¨ä¸Šæ¬¡æ´»åŠ¨æ˜¯å¦æ¥å—æŠ¥ä»·é—´çš„å…³ç³» plt.figure(figsize=(12,6)) plt.title('Recency Vs Acceptance of an offer') sns.lineplot(x='Recency', y='Response', data=data) ## ç½‘ç«™æ¯æœˆæ´»è·ƒç”¨æˆ·æŠ˜çº¿å›¾ groupedDate = data.set_index('Dt_Customer') groupedDate = groupedDate.resample('M').count() plt.figure(figsize=(14,4)) plt.title('Customer NumWebVisitsMonth by mounths') groupedDate.NumWebVisitsMonth.plot(kind='line') ## æ¯æœˆæ€»ä½“æ¶ˆè´¹é‡‘é¢æŠ˜çº¿å›¾ groupedDate = data.set_index('Dt_Customer') groupedDate = groupedDate.resample('M').count() plt.figure(figsize=(14,4)) plt.title('Customer Spent by mounths') groupedDate.Spent.plot(kind='line') ## æ¯æœˆé€šè¿‡ç½‘ç«™è´­ä¹°çš„ç”¨æˆ·æŠ˜çº¿å›¾ groupedDate = data.set_index('Dt_Customer') groupedDate = groupedDate.resample('M').count() plt.figure(figsize=(14,4)) plt.title('Customer NumWebPurchases by mounths') groupedDate.NumWebPurchases.plot() ## æ¯æœˆé€šè¿‡ç›®å½•è´­ä¹°çš„ç”¨æˆ·æŠ˜çº¿å›¾ groupedDate = data.set_index('Dt_Customer') groupedDate = groupedDate.resample('M').count() plt.figure(figsize=(14,4)) plt.title('Customer NumCatalogPurchases by mounths') groupedDate.NumCatalogPurchases.plot(kind='line') ##æ¯æœˆé€šè¿‡å•†åº—è´­ä¹°çš„ç”¨æˆ·æŠ˜ç°å›¾ groupedDate = data.set_index('Dt_Customer') groupedDate = groupedDate.resample('M').count() plt.figure(figsize=(14,4)) plt.title('Customer NumStorePurchases by mounths') groupedDate.NumStorePurchases.plot(kind='line') è‡ª2014å¹´6æœˆä»½ä»¥æ¥ç½‘ç«™çš„ç½‘ç«™è®¿é—®æ¬¡æ•°å’Œäº¤æ˜“æ€»é‡å‡ºç°äº†å¤§å¹…çš„ä¸‹æ»‘ã€‚é€šè¿‡ç½‘ç«™ã€ç›®å½•ã€å•†åº—ç›´æ¥è´­ä¹°çš„ä¸‰ä¸ªæ¸ é“éƒ½å‡ºç°äº†ç›¸åŒè½¨è¿¹çš„ä¸‹æ»‘ã€‚\næ•°æ®é¢„å¤„ç† s = (data.dtypes == 'object') object_cols = list(s[s].index) print(\"Categorical variables in the dataset:\", object_cols) LE=LabelEncoder() for i in object_cols: data[i]=data[[i]].apply(LE.fit_transform) ## ç›¸å…³æ€§çƒ­åŠ›å›¾ plt.figure( figsize = (14, 14)) data1 = data.iloc[:, 1:-1] sns.heatmap(data1.corr(), annot=True, cmap='Set2') ds = data.copy() cols_del = ['ID', 'AcceptedCmp3', 'AcceptedCmp4', 'AcceptedCmp5', 'AcceptedCmp1','AcceptedCmp2', 'Complain', 'Response', 'Have_Children', 'Dt_Customer', 'Children'] ds = ds.drop(cols_del, axis=1) ## æ•°æ®æ ‡å‡†åŒ– scaler = StandardScaler() scaler.fit(ds) scaled_ds = pd.DataFrame(scaler.transform(ds),columns= ds.columns ) PCAé™ç»´ pca = PCA(n_components=3) pca.fit(scaled_ds) PCA_ds = pd.DataFrame(pca.transform(scaled_ds), columns=([\"col1\",\"col2\", \"col3\"])) PCA_ds.describe().T x =PCA_ds[\"col1\"] y =PCA_ds[\"col2\"] z =PCA_ds[\"col3\"] ## é™ç»´åæ•°æ®å¯è§†åŒ– fig = plt.figure(figsize=(10,8)) ax = fig.add_subplot(111, projection=\"3d\") ax.scatter(x,y,z, marker=\"o\" ) ax.set_title(\"Data Visualization In The Reduced Dimension\") plt.show() èšç±» Elbow_M = KElbowVisualizer(KMeans(), k=10) Elbow_M.fit(PCA_ds) Elbow_M.show() AC = AgglomerativeClustering(n_clusters=4) ## æ‹Ÿåˆæ¨¡å‹å¹¶é¢„æµ‹èšç±» yhat_AC = AC.fit_predict(PCA_ds) PCA_ds[\"Clusters\"] = yhat_AC ## å°†èšç±»ç‰¹å¾æ·»åŠ åˆ°åŸå§‹æ•°æ® data[\"Clusters\"]= yhat_AC ## èšç±»ç»“æœå¯è§†åŒ– fig = plt.figure(figsize=(10,8)) ax = plt.subplot(111, projection='3d', label=\"bla\") ax.scatter(x, y, z, s=50, c=PCA_ds[\"Clusters\"], marker='o', cmap = 'Set2' ) ax.set_title(\"The Plot Of The Clusters\") plt.show() è¯„ä¼°æ¨¡å‹ ## èšç±»ç»“æœåˆ†å¸ƒå›¾ plt.figure(figsize=(12, 6)) pl = sns.countplot(x=data[\"Clusters\"], palette= 'Set2') pl.set_title(\"Distribution Of The Clusters\") plt.show() ## æŒ‰ç…§æ”¶å…¥å’Œæ”¯å‡ºå¯¹èšç±»ç»“æœè¿›è¡Œå¯è§†åŒ– plt.figure(figsize=(12, 6)) pl = sns.scatterplot(data = data,x=data[\"Spent\"], y=data[\"Income\"],hue=data[\"Clusters\"], palette= 'Set2') pl.set_title(\"Cluster's Profile Based On Income And Spent\") plt.legend() plt.show() æ”¶å…¥ä¸æ”¯å‡ºå›¾æ˜¾ç¤ºé›†ç¾¤æ¨¡å¼\nç¬¬ 0 ç»„ï¼šé«˜æ”¯å‡ºå’Œå¹³å‡æ”¶å…¥ ç¬¬ 1 ç»„ï¼šé«˜æ¶ˆè´¹å’Œé«˜æ”¶å…¥ ç¬¬ 2 ç»„ï¼šä½æ”¯å‡ºå’Œä½æ”¶å…¥ ç¬¬ 3 ç»„ï¼šé«˜æ”¯å‡ºå’Œä½æ”¶å…¥ plt.figure(figsize=(12,6)) sns.swarmplot(x=data[\"Clusters\"], y=data[\"Spent\"], alpha=0.9, palette= 'Set2' ) ## æŒ‰ç…§èšç±»ç»“æœå¯¹æ´»åŠ¨æ€»æ¥å—æƒ…å†µè¿›è¡Œå¯è§†åŒ– plt.figure(figsize=(12,6)) pl = sns.countplot(x=data[\"TotalAcceptedCmp\"],hue=data[\"Clusters\"], palette= 'Set2') pl.set_title(\"Count Of Promotion Accepted\") pl.set_xlabel(\"Number Of Total Accepted Promotions\") plt.show() ",
  "wordCount" : "906",
  "inLanguage": "en",
  "image":"https://xin5835.github.io/images/RepeatCustomer.jpeg","datePublished": "2022-12-28T11:18:15+08:00",
  "dateModified": "2022-12-28T11:18:15+08:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://xin5835.github.io/post/%E9%A1%BE%E5%AE%A2%E8%B4%AD%E7%89%A9%E5%88%86%E6%9E%90/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Robert's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://xin5835.github.io/favicon.ico"
    }
  }
}
</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://xin5835.github.io/" accesskey="h" title="Robert&#39;s Blog (Alt + H)">Robert&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://xin5835.github.io/" title="ğŸ Home">
                    <span>ğŸ Home</span>
                </a>
            </li>
            <li>
                <a href="https://xin5835.github.io/archives/" title="ğŸ—‚Archives">
                    <span>ğŸ—‚Archives</span>
                </a>
            </li>
            <li>
                <a href="https://xin5835.github.io/search/" title="ğŸ”Search (Alt &#43; /)" accesskey=/>
                    <span>ğŸ”Search</span>
                </a>
            </li>
            <li>
                <a href="https://xin5835.github.io/tags/" title="ğŸ”–Tags">
                    <span>ğŸ”–Tags</span>
                </a>
            </li>
            <li>
                <a href="https://xin5835.github.io/links/" title="ğŸ’ŒLinks">
                    <span>ğŸ’ŒLinks</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      é¡¾å®¢è´­ç‰©åˆ†æ
    </h1>
    <div class="post-meta"><span title='2022-12-28 11:18:15 +0800 CST'>December 28, 2022</span>

</div>
  </header> 
<figure class="entry-cover">
        <img loading="eager" src="https://xin5835.github.io/images/RepeatCustomer.jpeg" alt="">
        
</figure><div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e5%8a%a0%e8%bd%bd%e6%95%b0%e6%8d%ae" aria-label="åŠ è½½æ•°æ®">åŠ è½½æ•°æ®</a></li>
                <li>
                    <a href="#%e6%95%b0%e6%8d%ae%e5%87%86%e5%a4%87" aria-label="æ•°æ®å‡†å¤‡">æ•°æ®å‡†å¤‡</a></li>
                <li>
                    <a href="#%e5%88%86%e6%9e%90%e6%80%9d%e8%b7%af" aria-label="åˆ†ææ€è·¯ï¼š">åˆ†ææ€è·¯ï¼š</a></li>
                <li>
                    <a href="#%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97" aria-label="æ•°æ®æ¸…æ´—">æ•°æ®æ¸…æ´—</a></li>
                <li>
                    <a href="#%e6%95%b0%e6%8d%ae%e9%a2%84%e5%a4%84%e7%90%86" aria-label="æ•°æ®é¢„å¤„ç†">æ•°æ®é¢„å¤„ç†</a><ul>
                        
                <li>
                    <a href="#%e6%95%b0%e6%8d%ae%e5%8f%af%e8%a7%86%e5%8c%96" aria-label="æ•°æ®å¯è§†åŒ–">æ•°æ®å¯è§†åŒ–</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%95%b0%e6%8d%ae%e9%a2%84%e5%a4%84%e7%90%86-1" aria-label="æ•°æ®é¢„å¤„ç†">æ•°æ®é¢„å¤„ç†</a></li>
                <li>
                    <a href="#pca%e9%99%8d%e7%bb%b4" aria-label="PCAé™ç»´">PCAé™ç»´</a></li>
                <li>
                    <a href="#%e8%81%9a%e7%b1%bb" aria-label="èšç±»">èšç±»</a></li>
                <li>
                    <a href="#%e8%af%84%e4%bc%b0%e6%a8%a1%e5%9e%8b" aria-label="è¯„ä¼°æ¨¡å‹">è¯„ä¼°æ¨¡å‹</a>
                </li>
            </ul>
        </div>
    </details>
</div>










  <div class="post-content"><p>é¡¾å®¢è´­ç‰©æ•°æ®æ¸…æ´—ã€å¯è§†åŒ–å’Œèšç±»åˆ†æ.</p>
<p>å¯è§†åŒ–å›¾ç‰‡å’Œipybæ–‡ä»¶ï¼Œè¯¦è§! [Github] (<a href="https://github.com/xin5835/customer_shopping_analysis">https://github.com/xin5835/customer_shopping_analysis</a>)</p>
<p>å¯¼å…¥åº“</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np 
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd 
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> datetime
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> matplotlib <span style="color:#f92672">import</span> pyplot <span style="color:#66d9ef">as</span> plt 
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> seaborn <span style="color:#66d9ef">as</span> sns
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>style<span style="color:#f92672">.</span>use([<span style="color:#e6db74">&#39;fivethirtyeight&#39;</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.preprocessing <span style="color:#f92672">import</span> LabelEncoder
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.preprocessing <span style="color:#f92672">import</span> StandardScaler
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn <span style="color:#f92672">import</span> metrics
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.decomposition <span style="color:#f92672">import</span> PCA
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.cluster <span style="color:#f92672">import</span> KMeans
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.cluster <span style="color:#f92672">import</span> AgglomerativeClustering
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> yellowbrick.cluster <span style="color:#f92672">import</span> KElbowVisualizer
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> warnings
</span></span><span style="display:flex;"><span>warnings<span style="color:#f92672">.</span>filterwarnings(<span style="color:#e6db74">&#39;ignore&#39;</span>)
</span></span></code></pre></div><h2 id="åŠ è½½æ•°æ®">åŠ è½½æ•°æ®<a hidden class="anchor" aria-hidden="true" href="#åŠ è½½æ•°æ®">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>data <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#39;/Users/robert/python/marketing_campaign.csv&#39;</span>, sep<span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">&#39;</span>)
</span></span><span style="display:flex;"><span>data<span style="color:#f92672">.</span>info() 
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>data<span style="color:#f92672">.</span>head()<span style="color:#f92672">.</span>T
</span></span></code></pre></div><h2 id="æ•°æ®å‡†å¤‡">æ•°æ®å‡†å¤‡<a hidden class="anchor" aria-hidden="true" href="#æ•°æ®å‡†å¤‡">#</a></h2>
<ul>
<li>æ•°æ®ç»´åº¦è¯´æ˜</li>
</ul>
<table>
  <thead>
      <tr>
          <th>åˆ†ç±»</th>
          <th>åˆ—å</th>
          <th>è¯´æ˜</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>ç”¨æˆ·å±æ€§</td>
          <td>ID</td>
          <td>ç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†ç¬¦</td>
      </tr>
      <tr>
          <td>ç”¨æˆ·å±æ€§</td>
          <td>Year_Birth</td>
          <td>ç”¨æˆ·çš„å‡ºç”Ÿå¹´ä»½</td>
      </tr>
      <tr>
          <td>ç”¨æˆ·å±æ€§</td>
          <td>Education</td>
          <td>æ•™è‚²æ°´å¹³</td>
      </tr>
      <tr>
          <td>ç”¨æˆ·å±æ€§</td>
          <td>Marital_Status</td>
          <td>å©šå§»çŠ¶å†µ</td>
      </tr>
      <tr>
          <td>ç”¨æˆ·å±æ€§</td>
          <td>Income</td>
          <td>å¹´å®¶åº­æ”¶å…¥</td>
      </tr>
      <tr>
          <td>ç”¨æˆ·å±æ€§</td>
          <td>Kidhome</td>
          <td>å„¿ç«¥æ•°é‡</td>
      </tr>
      <tr>
          <td>ç”¨æˆ·å±æ€§</td>
          <td>Teenhome</td>
          <td>é’å°‘å¹´äººæ•°</td>
      </tr>
      <tr>
          <td>ç”¨æˆ·å¥åº·åº¦</td>
          <td>Dt_Customer</td>
          <td>é¡¾å®¢æ³¨å†Œçš„æ—¥æœŸ</td>
      </tr>
      <tr>
          <td>ç”¨æˆ·å¥åº·åº¦</td>
          <td>Recency</td>
          <td>è‡ªç”¨æˆ·ä¸Šæ¬¡è´­ä¹°ä»¥æ¥çš„å¤©æ•°</td>
      </tr>
      <tr>
          <td>ç”¨æˆ·å¥åº·åº¦</td>
          <td>NumWebVisitsMonth</td>
          <td>ä¸Šä¸ªæœˆè®¿é—®å…¬å¸ç½‘ç«™çš„æ¬¡æ•°</td>
      </tr>
      <tr>
          <td>ç”¨æˆ·å¥åº·åº¦</td>
          <td>Complain</td>
          <td>å¦‚æœç”¨æˆ·åœ¨è¿‡å» 2 å¹´å†…æŠ•è¯‰ï¼Œåˆ™ä¸º 1ï¼Œå¦åˆ™ä¸º 0</td>
      </tr>
      <tr>
          <td>äº¤æ˜“ä¿¡æ¯</td>
          <td>MntWines</td>
          <td>è¿‡å»ä¸¤å¹´åœ¨è‘¡è„é…’ä¸Šçš„æ¶ˆè´¹é‡‘é¢</td>
      </tr>
      <tr>
          <td>äº¤æ˜“ä¿¡æ¯</td>
          <td>MntFruits</td>
          <td>è¿‡å»ä¸¤å¹´åœ¨æ°´æœä¸Šçš„èŠ±è´¹</td>
      </tr>
      <tr>
          <td>äº¤æ˜“ä¿¡æ¯</td>
          <td>MntMeatProducts</td>
          <td>è¿‡å»2å¹´è‚‰ç±»æ¶ˆè´¹é‡</td>
      </tr>
      <tr>
          <td>äº¤æ˜“ä¿¡æ¯</td>
          <td>MntFishProducts</td>
          <td>è¿‡å»2å¹´åœ¨é±¼ä¸ŠèŠ±è´¹çš„é‡‘é¢</td>
      </tr>
      <tr>
          <td>äº¤æ˜“ä¿¡æ¯</td>
          <td>MntSweetProducts</td>
          <td>è¿‡å»2å¹´åœ¨ç³–æœä¸ŠèŠ±è´¹çš„é‡‘é¢</td>
      </tr>
      <tr>
          <td>äº¤æ˜“ä¿¡æ¯</td>
          <td>MntGoldProds</td>
          <td>è¿‡å»2å¹´åœ¨é»„é‡‘ä¸ŠèŠ±è´¹çš„é‡‘é¢</td>
      </tr>
      <tr>
          <td>äº¤æ˜“æ¥æº</td>
          <td>NumWebPurchases</td>
          <td>é€šè¿‡å…¬å¸ç½‘ç«™è¿›è¡Œçš„è´­ä¹°æ•°é‡</td>
      </tr>
      <tr>
          <td>äº¤æ˜“æ¥æº</td>
          <td>NumCatalogPurchases</td>
          <td>ä½¿ç”¨ç›®å½•è¿›è¡Œçš„è´­ä¹°æ•°é‡</td>
      </tr>
      <tr>
          <td>äº¤æ˜“æ¥æº</td>
          <td>NumStorePurchases</td>
          <td>ç›´æ¥åœ¨å•†åº—è´­ä¹°çš„æ•°é‡</td>
      </tr>
      <tr>
          <td>è¿è¥è½¬åŒ–ä¿¡æ¯</td>
          <td>NumDealsPurchases</td>
          <td>æ‰“æŠ˜çš„è´­ä¹°æ¬¡æ•°</td>
      </tr>
      <tr>
          <td>è¿è¥è½¬åŒ–ä¿¡æ¯</td>
          <td>AcceptedCmp1</td>
          <td>å¦‚æœç”¨æˆ·åœ¨ç¬¬ä¸€ä¸ªæ´»åŠ¨ä¸­æ¥å—äº†æŠ¥ä»·ï¼Œåˆ™ä¸º 1ï¼Œå¦åˆ™ä¸º 0</td>
      </tr>
      <tr>
          <td>è¿è¥è½¬åŒ–ä¿¡æ¯</td>
          <td>AcceptedCmp2</td>
          <td>å¦‚æœç”¨æˆ·åœ¨ç¬¬äºŒä¸ªæ´»åŠ¨ä¸­æ¥å—äº†æŠ¥ä»·ï¼Œåˆ™ä¸º 1ï¼Œå¦åˆ™ä¸º 0</td>
      </tr>
      <tr>
          <td>è¿è¥è½¬åŒ–ä¿¡æ¯</td>
          <td>AcceptedCmp3</td>
          <td>å¦‚æœç”¨æˆ·åœ¨ç¬¬ä¸‰ä¸ªæ´»åŠ¨ä¸­æ¥å—äº†æŠ¥ä»·ï¼Œåˆ™ä¸º 1ï¼Œå¦åˆ™ä¸º 0</td>
      </tr>
      <tr>
          <td>è¿è¥è½¬åŒ–ä¿¡æ¯</td>
          <td>AcceptedCmp4</td>
          <td>å¦‚æœç”¨æˆ·åœ¨ç¬¬ 4 ä¸ªæ´»åŠ¨ä¸­æ¥å—äº†æŠ¥ä»·ï¼Œåˆ™ä¸º 1ï¼Œå¦åˆ™ä¸º 0</td>
      </tr>
      <tr>
          <td>è¿è¥è½¬åŒ–ä¿¡æ¯</td>
          <td>AcceptedCmp5</td>
          <td>å¦‚æœç”¨æˆ·åœ¨ç¬¬ 5 ä¸ªæ´»åŠ¨ä¸­æ¥å—äº†æŠ¥ä»·ï¼Œåˆ™ä¸º 1ï¼Œå¦åˆ™ä¸º 0</td>
      </tr>
      <tr>
          <td>è¿è¥è½¬åŒ–ä¿¡æ¯</td>
          <td>Response</td>
          <td>å¦‚æœç”¨æˆ·åœ¨ä¸Šæ¬¡æ´»åŠ¨ä¸­æ¥å—äº†æŠ¥ä»·ï¼Œåˆ™ä¸º 1ï¼Œå¦åˆ™ä¸º 0</td>
      </tr>
      <tr>
          <td></td>
          <td>Z_CostContact</td>
          <td>Z_æˆæœ¬è”ç³»æ–¹å¼</td>
      </tr>
      <tr>
          <td></td>
          <td>Z_Revenue</td>
          <td>Z_æ”¶å…¥</td>
      </tr>
  </tbody>
</table>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## æ£€æŸ¥ç¼ºå¤±å€¼</span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;ç¼ºå¤±å€¼:</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, data<span style="color:#f92672">.</span>isnull()<span style="color:#f92672">.</span>sum())    <span style="color:#75715e">## æ”¶å…¥æ•°æ®æœ‰ç¼ºå¤±å€¼ï¼Œç¼ºå¤±äº†24æ¡æ•°æ®</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## æ£€æŸ¥æ˜¯å¦æœ‰é‡å¤æ•°æ®</span>
</span></span><span style="display:flex;"><span>data<span style="color:#f92672">.</span>duplicated()<span style="color:#f92672">.</span>sum()
</span></span></code></pre></div><h2 id="åˆ†ææ€è·¯">åˆ†ææ€è·¯ï¼š<a hidden class="anchor" aria-hidden="true" href="#åˆ†ææ€è·¯">#</a></h2>
<ul>
<li>ç›®æ ‡ï¼šæŒ–æ˜æ•°æ®çš„ä»·å€¼ï¼ŒåŠ©åŠ›ä¸šåŠ¡æˆé•¿å’Œç”¨æˆ·å¢é•¿</li>
<li>ç”¨æˆ·ä¿¡æ¯&mdash;-åšç”¨æˆ·ç”»åƒ</li>
<li>ç”¨æˆ·å¥åº·åº¦&mdash;-åšç”¨æˆ·ä»·å€¼è¯„çº§</li>
<li>äº¤æ˜“ä¿¡æ¯&ndash;åšæ¨èç®—æ³•</li>
<li>äº¤æ˜“æ¥æº&mdash;-åšå¢é•¿åˆ†æ</li>
<li>è¿è¥è½¬åŒ–&mdash;-è¯„ä¼°è¿è¥æ´»åŠ¨çš„æ•ˆæœ</li>
</ul>
<h2 id="æ•°æ®æ¸…æ´—">æ•°æ®æ¸…æ´—<a hidden class="anchor" aria-hidden="true" href="#æ•°æ®æ¸…æ´—">#</a></h2>
<ul>
<li>æ”¶å…¥æ•°æ®æœ‰24æ¡ç¼ºå¤±å€¼ï¼Œä½¿ç”¨å‡å€¼å¯¹å…¶è¿›è¡Œå¡«å……</li>
<li>é¡¾å®¢æ³¨å†Œæ—¶é—´éœ€è¦è½¬æ¢ä¸ºæ—¥æœŸæ ¼å¼</li>
<li>æ•™è‚²æ°´å¹³å’Œå©šå§»çŠ¶æ€ä¸¤ä¸ªå˜é‡éœ€è¦å¯¹å…¶è¿›è¡Œé‡æ–°ç¼–ç </li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## é‡‡ç”¨å‡å€¼å¯¹æ”¶å…¥åˆ—çš„24æ¡ç¼ºå¤±æ•°æ®è¿›è¡Œå¡«å……</span>
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>fillna(data[<span style="color:#e6db74">&#39;Income&#39;</span>]<span style="color:#f92672">.</span>mean())
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## å°†æ³¨å†Œæ—¥æœŸæ•°æ®æ ¼å¼è°ƒæ•´ä¸ºæ—¥æœŸæ ¼å¼</span>
</span></span><span style="display:flex;"><span>data[<span style="color:#e6db74">&#39;Dt_Customer&#39;</span>] <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>to_datetime(data[<span style="color:#e6db74">&#39;Dt_Customer&#39;</span>])
</span></span><span style="display:flex;"><span>data[<span style="color:#e6db74">&#39;Dt_Customer&#39;</span>]<span style="color:#f92672">.</span>apply([<span style="color:#e6db74">&#39;min&#39;</span>, <span style="color:#e6db74">&#39;max&#39;</span>])
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;å©šå§»çŠ¶å†µ:</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, data[<span style="color:#e6db74">&#39;Marital_Status&#39;</span>]<span style="color:#f92672">.</span>value_counts(), <span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;æ•™è‚²æƒ…å†µ:</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, data[<span style="color:#e6db74">&#39;Education&#39;</span>]<span style="color:#f92672">.</span>value_counts())
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## ä¸åŒå©šå§»çŠ¶æ€çš„é¡¾å®¢æ‰€å æ¯”ä¾‹</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">9</span>, <span style="color:#ae81ff">9</span>))
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> data[<span style="color:#e6db74">&#39;Marital_Status&#39;</span>]<span style="color:#f92672">.</span>value_counts()<span style="color:#f92672">.</span>sort_values()
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>pie(x<span style="color:#f92672">=</span>x, labels<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;YoLo&#39;</span>, <span style="color:#e6db74">&#39;Absurd&#39;</span>,<span style="color:#e6db74">&#39;Alone&#39;</span>, <span style="color:#e6db74">&#39;Window&#39;</span>, <span style="color:#e6db74">&#39;Divorced&#39;</span>, <span style="color:#e6db74">&#39;Single&#39;</span>, <span style="color:#e6db74">&#39;Together&#39;</span>,<span style="color:#e6db74">&#39;Married&#39;</span>],
</span></span><span style="display:flex;"><span>        autopct <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">%1.1f%%</span><span style="color:#e6db74">&#39;</span>, )
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>axis(<span style="color:#e6db74">&#39;equal&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#39;Propotion of Marital_Status&#39;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## ä¸åŒå—æ•™è‚²æ°´å¹³çš„é¡¾å®¢æ‰€å æ¯”ä¾‹</span>
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> data[<span style="color:#e6db74">&#39;Education&#39;</span>]<span style="color:#f92672">.</span>value_counts()<span style="color:#f92672">.</span>sort_values()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">9</span>,<span style="color:#ae81ff">9</span>))
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>pie(x<span style="color:#f92672">=</span>x, labels<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;2n Cycle&#39;</span>, <span style="color:#e6db74">&#39;Basic&#39;</span>, <span style="color:#e6db74">&#39;Master&#39;</span>, <span style="color:#e6db74">&#39;PhD&#39;</span>, <span style="color:#e6db74">&#39;Graduation&#39;</span>], autopct <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">%1.1f%%</span><span style="color:#e6db74">&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#39;Propotion of Education&#39;</span>)
</span></span></code></pre></div><h2 id="æ•°æ®é¢„å¤„ç†">æ•°æ®é¢„å¤„ç†<a hidden class="anchor" aria-hidden="true" href="#æ•°æ®é¢„å¤„ç†">#</a></h2>
<p><strong>åˆ›å»ºæ–°çš„æ•°æ®ç‰¹å¾:</strong></p>
<ul>
<li>åˆ©ç”¨å‡ºç”Ÿæ—¥æœŸåˆ›å»ºAgeï¼ˆå¹´é¾„ï¼‰åˆ—</li>
<li>åˆ›å»ºSpentï¼ˆæ€»æ¶ˆè´¹ï¼‰åˆ—</li>
<li>åˆ›å»ºChildrenï¼ˆå°å­©ï¼‰åˆ—</li>
<li>åˆ›å»ºTotalAcceptedCmpï¼ˆæ¥å—æŠ¥ä»·æ¬¡æ•°åˆè®¡ï¼‰åˆ—</li>
<li>åˆ›å»ºNumTotalPurchasesï¼ˆæ€»è´­ä¹°æ•°é‡ï¼‰åˆ—</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>data[<span style="color:#e6db74">&#39;Age&#39;</span>] <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>apply(<span style="color:#66d9ef">lambda</span> data:  <span style="color:#ae81ff">2015</span><span style="color:#f92672">-</span> data[<span style="color:#e6db74">&#39;Year_Birth&#39;</span>], axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>data[<span style="color:#e6db74">&#39;Spent&#39;</span>] <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>apply(<span style="color:#66d9ef">lambda</span> data: data[<span style="color:#e6db74">&#39;MntFishProducts&#39;</span>] <span style="color:#f92672">+</span> data[<span style="color:#e6db74">&#39;MntFruits&#39;</span>] <span style="color:#f92672">+</span> data[<span style="color:#e6db74">&#39;MntGoldProds&#39;</span>] <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>                data[<span style="color:#e6db74">&#39;MntMeatProducts&#39;</span>] <span style="color:#f92672">+</span> data[<span style="color:#e6db74">&#39;MntSweetProducts&#39;</span>] <span style="color:#f92672">+</span> data[<span style="color:#e6db74">&#39;MntWines&#39;</span>], axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>data[<span style="color:#e6db74">&#39;Children&#39;</span>] <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>apply(<span style="color:#66d9ef">lambda</span> data: data[<span style="color:#e6db74">&#39;Kidhome&#39;</span>] <span style="color:#f92672">+</span> data[<span style="color:#e6db74">&#39;Teenhome&#39;</span>], axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>data[<span style="color:#e6db74">&#39;TotalAcceptedCmp&#39;</span>] <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>apply(<span style="color:#66d9ef">lambda</span> data: data[<span style="color:#e6db74">&#39;AcceptedCmp1&#39;</span>] <span style="color:#f92672">+</span> data[<span style="color:#e6db74">&#39;AcceptedCmp2&#39;</span>] <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>                                      data[<span style="color:#e6db74">&#39;AcceptedCmp3&#39;</span>] <span style="color:#f92672">+</span> data[<span style="color:#e6db74">&#39;AcceptedCmp4&#39;</span>] <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>                                      data[<span style="color:#e6db74">&#39;AcceptedCmp5&#39;</span>], axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>data[<span style="color:#e6db74">&#39;NumTotalPurchases&#39;</span>] <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>apply(<span style="color:#66d9ef">lambda</span> data: data[<span style="color:#e6db74">&#39;NumWebPurchases&#39;</span>] <span style="color:#f92672">+</span> data[<span style="color:#e6db74">&#39;NumCatalogPurchases&#39;</span>] <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>                            data[<span style="color:#e6db74">&#39;NumStorePurchases&#39;</span>] <span style="color:#f92672">+</span> data[<span style="color:#e6db74">&#39;NumDealsPurchases&#39;</span>], axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## åˆ é™¤&#39;Year_Birth&#39;, &#39;Z_CostContact&#39;, &#39;Z_Revenue&#39;, &#39;Kidhome&#39;, &#39;Teenhome&#39;åˆ—</span>
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>drop([<span style="color:#e6db74">&#39;Year_Birth&#39;</span>, <span style="color:#e6db74">&#39;Z_CostContact&#39;</span>, <span style="color:#e6db74">&#39;Z_Revenue&#39;</span>, <span style="color:#e6db74">&#39;Kidhome&#39;</span>, <span style="color:#e6db74">&#39;Teenhome&#39;</span>], axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>) 
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## åˆ é™¤æ•°æ®ä¸­æ”¶å…¥å’Œå¹´é¾„çš„å¼‚å¸¸å€¼éƒ¨åˆ†</span>
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>drop(data<span style="color:#f92672">.</span>loc[data[<span style="color:#e6db74">&#39;Income&#39;</span>] <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">600000</span>]<span style="color:#f92672">.</span>index)
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>drop(data<span style="color:#f92672">.</span>loc[data[<span style="color:#e6db74">&#39;Age&#39;</span>] <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">100</span>]<span style="color:#f92672">.</span>index)
</span></span></code></pre></div><h3 id="æ•°æ®å¯è§†åŒ–">æ•°æ®å¯è§†åŒ–<a hidden class="anchor" aria-hidden="true" href="#æ•°æ®å¯è§†åŒ–">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## åˆ›å»ºæ–°çš„ç‰¹å¾â€Have_Childrenâ€œï¼Œæœ‰å°å­©å€¼ä¸º1ï¼Œæ²¡æœ‰å°å­©å€¼ä¸º0</span>
</span></span><span style="display:flex;"><span>data[<span style="color:#e6db74">&#39;Have_Children&#39;</span>] <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>where(data<span style="color:#f92672">.</span>Children <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>data<span style="color:#f92672">.</span>head()
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## ä»¥æ˜¯å¦æœ‰å°å­©ä¸ºåˆ†ç»„å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ç»˜åˆ¶æ•£ç‚¹å›¾çŸ©é˜µ</span>
</span></span><span style="display:flex;"><span>pairplot <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>loc[:, [<span style="color:#e6db74">&#39;Income&#39;</span>, <span style="color:#e6db74">&#39;Age&#39;</span>, <span style="color:#e6db74">&#39;Spent&#39;</span>, <span style="color:#e6db74">&#39;Recency&#39;</span>, <span style="color:#e6db74">&#39;Have_Children&#39;</span>]]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sns<span style="color:#f92672">.</span>pairplot(pairplot, hue<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Have_Children&#39;</span>, palette<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Set1&#39;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## å¯¹è¿ç»­å‹å˜é‡Ageè¿›è¡Œé¢å…ƒåˆ’åˆ†</span>
</span></span><span style="display:flex;"><span>bins <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">20</span>, <span style="color:#ae81ff">40</span>, <span style="color:#ae81ff">60</span>, <span style="color:#ae81ff">80</span>,<span style="color:#ae81ff">100</span>]
</span></span><span style="display:flex;"><span>aged <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>cut(data[<span style="color:#e6db74">&#39;Age&#39;</span>], bins<span style="color:#f92672">=</span>bins)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#39;number of age_cut:</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>, aged<span style="color:#f92672">.</span>value_counts())
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## ä¸åŒå¹´é¾„æ®µé¡¾å®¢åˆ†ç±»æ±‡æ€»</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">12</span>,<span style="color:#ae81ff">6</span>))
</span></span><span style="display:flex;"><span>sns<span style="color:#f92672">.</span>countplot(y<span style="color:#f92672">=</span>aged, palette<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Set2&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#39;countplot of Age&#39;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## ä¸åŒå¹´é¾„åŒºé—´åœ¨è´­ç‰©èŠ±è´¹ä¸Šçš„åŒºåˆ«</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">12</span>,<span style="color:#ae81ff">6</span>))
</span></span><span style="display:flex;"><span>sns<span style="color:#f92672">.</span>boxplot(x<span style="color:#f92672">=</span>aged, y<span style="color:#f92672">=</span>data[<span style="color:#e6db74">&#39;Spent&#39;</span>], palette<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Set2&#39;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## å—æ•™è‚²æ°´å¹³å’Œè´­ç‰©èŠ±è´¹é—´çš„å…³ç³»</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## ä¸åŒå©šå§»çŠ¶æ€ä¸‹é¡¾å®¢çš„èŠ±è´¹æ¯”è¾ƒ</span>
</span></span><span style="display:flex;"><span>to_boxplot <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;Education&#39;</span>, <span style="color:#e6db74">&#39;Marital_Status&#39;</span>]
</span></span><span style="display:flex;"><span>fig, axes <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>subplots(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span>, figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">12</span>))
</span></span><span style="display:flex;"><span>axes <span style="color:#f92672">=</span> axes<span style="color:#f92672">.</span>flatten()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> col, ax <span style="color:#f92672">in</span> zip(to_boxplot, axes):
</span></span><span style="display:flex;"><span>    ax <span style="color:#f92672">=</span> sns<span style="color:#f92672">.</span>boxplot(data<span style="color:#f92672">=</span>data, x<span style="color:#f92672">=</span>col, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Spent&#39;</span>, ax<span style="color:#f92672">=</span>ax, palette<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Set2&#39;</span>)
</span></span><span style="display:flex;"><span>    ax<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;boxplot of spent by </span><span style="color:#e6db74">{</span>col<span style="color:#e6db74">}</span><span style="color:#e6db74">&#39;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## ä»¥æ•™è‚²æ°´å¹³çš„ä¸åŒå¯¹ä¸åŒå©šå§»çŠ¶æ€çš„é¡¾å®¢è¿›è¡Œåˆ†ç»„ï¼Œå¹¶å¯¹æ¯”å…¶åœ¨æ”¶å…¥å’Œè´­ç‰©èŠ±è´¹ä¸Šçš„å·®å¼‚å¯¹æ¯”</span>
</span></span><span style="display:flex;"><span>fig, axes <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>subplots(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span>, figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">14</span>,<span style="color:#ae81ff">10</span>))
</span></span><span style="display:flex;"><span>sns<span style="color:#f92672">.</span>barplot(x<span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Marital_Status&#39;</span>,y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Income&#39;</span>,hue<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Education&#39;</span>,data<span style="color:#f92672">=</span>data, ci<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>,palette<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Set2&#39;</span>, ax<span style="color:#f92672">=</span>axes[<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span>sns<span style="color:#f92672">.</span>barplot(x<span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Marital_Status&#39;</span>,y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Spent&#39;</span>,hue<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Education&#39;</span>,data<span style="color:#f92672">=</span>data, ci<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>, palette<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Set2&#39;</span>, ax<span style="color:#f92672">=</span>axes[<span style="color:#ae81ff">1</span>])
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## æ”¶å…¥å’Œæ”¯å‡ºå‘ˆçº¿æ€§å¢é•¿å…³ç³»</span>
</span></span><span style="display:flex;"><span>fig, axes <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>subplots(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">14</span>,<span style="color:#ae81ff">6</span>))
</span></span><span style="display:flex;"><span>sns<span style="color:#f92672">.</span>scatterplot(y<span style="color:#f92672">=</span>data[<span style="color:#e6db74">&#39;Spent&#39;</span>], x<span style="color:#f92672">=</span>data[<span style="color:#e6db74">&#39;Income&#39;</span>], ax<span style="color:#f92672">=</span>axes[<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span>sns<span style="color:#f92672">.</span>regplot(y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Spent&#39;</span>, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Income&#39;</span>, data<span style="color:#f92672">=</span>data, ax<span style="color:#f92672">=</span>axes[<span style="color:#ae81ff">1</span>])
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## ç½‘ç«™é¡¾å®¢æ•´ä½“èŠ±è´¹ç›´æ–¹å›¾</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">12</span>,<span style="color:#ae81ff">6</span>))
</span></span><span style="display:flex;"><span>sns<span style="color:#f92672">.</span>histplot(data[<span style="color:#e6db74">&#39;Spent&#39;</span>], bins<span style="color:#f92672">=</span><span style="color:#ae81ff">50</span>, kde<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#39;histogram of Spent&#39;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## è‡ªç”¨æˆ·ä¸Šæ¬¡è´­ä¹°ä»¥æ¥çš„å¤©æ•°çš„é¢‘æ•°åˆ†å¸ƒ</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">12</span>,<span style="color:#ae81ff">6</span>))
</span></span><span style="display:flex;"><span>sns<span style="color:#f92672">.</span>histplot(data[<span style="color:#e6db74">&#39;Recency&#39;</span>], bins<span style="color:#f92672">=</span><span style="color:#ae81ff">60</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## ç½‘ç«™ç”¨æˆ·æœˆåº¦æ´»è·ƒé¢‘æ•°ç»Ÿè®¡</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">12</span>,<span style="color:#ae81ff">6</span>))
</span></span><span style="display:flex;"><span>sns<span style="color:#f92672">.</span>histplot(data[<span style="color:#e6db74">&#39;NumWebVisitsMonth&#39;</span>], bins<span style="color:#f92672">=</span><span style="color:#ae81ff">50</span>, kde<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#39;Monthly activities (5-7)/month&#39;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## ç½‘ç«™æŠ•è¯‰æƒ…å†µ</span>
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> data[<span style="color:#e6db74">&#39;Complain&#39;</span>]<span style="color:#f92672">.</span>value_counts()<span style="color:#f92672">.</span>sort_values()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">8</span>,<span style="color:#ae81ff">8</span>))
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>pie(x<span style="color:#f92672">=</span>x, labels<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;YES&#39;</span>, <span style="color:#e6db74">&#39;NO&#39;</span>], autopct <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">%1.1f%%</span><span style="color:#e6db74">&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#39;Complain of customer&#39;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## é…’ã€é±¼ã€æ°´æœã€é»„é‡‘ã€è‚‰ã€ç³–æœå„è‡ªé”€é‡é¢‘æ•°ç»Ÿè®¡</span>
</span></span><span style="display:flex;"><span>to_histplot <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;MntWines&#39;</span>, <span style="color:#e6db74">&#39;MntFishProducts&#39;</span>, <span style="color:#e6db74">&#39;MntFruits&#39;</span>, <span style="color:#e6db74">&#39;MntGoldProds&#39;</span>, 
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#39;MntMeatProducts&#39;</span>, <span style="color:#e6db74">&#39;MntSweetProducts&#39;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>fig, axes <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>subplots(<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">2</span>, sharex<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>, sharey<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>, figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">14</span>, <span style="color:#ae81ff">10</span>))
</span></span><span style="display:flex;"><span>axes <span style="color:#f92672">=</span> axes<span style="color:#f92672">.</span>flatten()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> col, ax <span style="color:#f92672">in</span> zip(to_histplot, axes):
</span></span><span style="display:flex;"><span>    ax <span style="color:#f92672">=</span> sns<span style="color:#f92672">.</span>histplot(data<span style="color:#f92672">=</span>data, x<span style="color:#f92672">=</span>col, ax<span style="color:#f92672">=</span>ax)
</span></span><span style="display:flex;"><span>    ax<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;histogram of </span><span style="color:#e6db74">{</span>col<span style="color:#e6db74">}</span><span style="color:#e6db74">&#39;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## é€šè¿‡ç›®å½•ã€å•†åº—å’Œç½‘ç«™ä¸‰ä¸ªæ¸ é“è´­ä¹°çš„é¢‘æ•°ç»Ÿè®¡</span>
</span></span><span style="display:flex;"><span>to_histplot <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;NumCatalogPurchases&#39;</span>, <span style="color:#e6db74">&#39;NumStorePurchases&#39;</span>, <span style="color:#e6db74">&#39;NumWebPurchases&#39;</span>]
</span></span><span style="display:flex;"><span>fig, axes <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>subplots(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>, sharey<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>, figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">14</span>, <span style="color:#ae81ff">9</span>))
</span></span><span style="display:flex;"><span>axes <span style="color:#f92672">=</span> axes<span style="color:#f92672">.</span>flatten()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> col, ax <span style="color:#f92672">in</span> zip(to_histplot, axes):
</span></span><span style="display:flex;"><span>    ax <span style="color:#f92672">=</span> sns<span style="color:#f92672">.</span>histplot(data<span style="color:#f92672">=</span>data, x<span style="color:#f92672">=</span>col, ax<span style="color:#f92672">=</span>ax)
</span></span><span style="display:flex;"><span>    plt<span style="color:#f92672">.</span>subplots_adjust(hspace <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, wspace <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.3</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## åˆ›å»ºæ€»æ´»åŠ¨æ¥å—æŠ¥ä»·æ¬¡æ•°æŒ‡æ ‡</span>
</span></span><span style="display:flex;"><span>acceptedConcat <span style="color:#f92672">=</span> data[[<span style="color:#e6db74">&#39;AcceptedCmp1&#39;</span>, <span style="color:#e6db74">&#39;AcceptedCmp2&#39;</span>, <span style="color:#e6db74">&#39;AcceptedCmp3&#39;</span>, <span style="color:#e6db74">&#39;AcceptedCmp4&#39;</span>, <span style="color:#e6db74">&#39;AcceptedCmp5&#39;</span>]]
</span></span><span style="display:flex;"><span>acceptedConcat <span style="color:#f92672">=</span> acceptedConcat<span style="color:#f92672">.</span>apply(pd<span style="color:#f92672">.</span>DataFrame<span style="color:#f92672">.</span>sum)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#39;acceptedConcat:</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>, acceptedConcat)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## æ¯æ¬¡æ¥å—æ´»åŠ¨æŠ¥ä»·çš„ç”¨æˆ·çš„é¢‘æ•°ç»Ÿè®¡</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">12</span>,<span style="color:#ae81ff">6</span>))
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#39;accepted the campaings in every attempt&#39;</span>)
</span></span><span style="display:flex;"><span>sns<span style="color:#f92672">.</span>barplot(x<span style="color:#f92672">=</span>acceptedConcat<span style="color:#f92672">.</span>index, y<span style="color:#f92672">=</span>acceptedConcat, palette<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Set2&#39;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## ç”¨æˆ·ä¸Šæ¬¡è´­ä¹°ä»¥æ¥çš„å¤©æ•°å’Œåœ¨ä¸Šæ¬¡æ´»åŠ¨æ˜¯å¦æ¥å—æŠ¥ä»·é—´çš„å…³ç³»</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">12</span>,<span style="color:#ae81ff">6</span>))
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#39;Recency Vs Acceptance of an offer&#39;</span>)
</span></span><span style="display:flex;"><span>sns<span style="color:#f92672">.</span>lineplot(x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Recency&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Response&#39;</span>, data<span style="color:#f92672">=</span>data)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## ç½‘ç«™æ¯æœˆæ´»è·ƒç”¨æˆ·æŠ˜çº¿å›¾</span>
</span></span><span style="display:flex;"><span>groupedDate <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>set_index(<span style="color:#e6db74">&#39;Dt_Customer&#39;</span>)
</span></span><span style="display:flex;"><span>groupedDate <span style="color:#f92672">=</span> groupedDate<span style="color:#f92672">.</span>resample(<span style="color:#e6db74">&#39;M&#39;</span>)<span style="color:#f92672">.</span>count()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">14</span>,<span style="color:#ae81ff">4</span>))
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#39;Customer NumWebVisitsMonth by mounths&#39;</span>)
</span></span><span style="display:flex;"><span>groupedDate<span style="color:#f92672">.</span>NumWebVisitsMonth<span style="color:#f92672">.</span>plot(kind<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;line&#39;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## æ¯æœˆæ€»ä½“æ¶ˆè´¹é‡‘é¢æŠ˜çº¿å›¾</span>
</span></span><span style="display:flex;"><span>groupedDate <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>set_index(<span style="color:#e6db74">&#39;Dt_Customer&#39;</span>)
</span></span><span style="display:flex;"><span>groupedDate <span style="color:#f92672">=</span> groupedDate<span style="color:#f92672">.</span>resample(<span style="color:#e6db74">&#39;M&#39;</span>)<span style="color:#f92672">.</span>count()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">14</span>,<span style="color:#ae81ff">4</span>))
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#39;Customer Spent by mounths&#39;</span>)
</span></span><span style="display:flex;"><span>groupedDate<span style="color:#f92672">.</span>Spent<span style="color:#f92672">.</span>plot(kind<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;line&#39;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## æ¯æœˆé€šè¿‡ç½‘ç«™è´­ä¹°çš„ç”¨æˆ·æŠ˜çº¿å›¾</span>
</span></span><span style="display:flex;"><span>groupedDate <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>set_index(<span style="color:#e6db74">&#39;Dt_Customer&#39;</span>)
</span></span><span style="display:flex;"><span>groupedDate <span style="color:#f92672">=</span> groupedDate<span style="color:#f92672">.</span>resample(<span style="color:#e6db74">&#39;M&#39;</span>)<span style="color:#f92672">.</span>count()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">14</span>,<span style="color:#ae81ff">4</span>))
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#39;Customer NumWebPurchases by mounths&#39;</span>)
</span></span><span style="display:flex;"><span>groupedDate<span style="color:#f92672">.</span>NumWebPurchases<span style="color:#f92672">.</span>plot()
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## æ¯æœˆé€šè¿‡ç›®å½•è´­ä¹°çš„ç”¨æˆ·æŠ˜çº¿å›¾</span>
</span></span><span style="display:flex;"><span>groupedDate <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>set_index(<span style="color:#e6db74">&#39;Dt_Customer&#39;</span>)
</span></span><span style="display:flex;"><span>groupedDate <span style="color:#f92672">=</span> groupedDate<span style="color:#f92672">.</span>resample(<span style="color:#e6db74">&#39;M&#39;</span>)<span style="color:#f92672">.</span>count()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">14</span>,<span style="color:#ae81ff">4</span>))
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#39;Customer NumCatalogPurchases by mounths&#39;</span>)
</span></span><span style="display:flex;"><span>groupedDate<span style="color:#f92672">.</span>NumCatalogPurchases<span style="color:#f92672">.</span>plot(kind<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;line&#39;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">##æ¯æœˆé€šè¿‡å•†åº—è´­ä¹°çš„ç”¨æˆ·æŠ˜ç°å›¾</span>
</span></span><span style="display:flex;"><span>groupedDate <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>set_index(<span style="color:#e6db74">&#39;Dt_Customer&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>groupedDate <span style="color:#f92672">=</span> groupedDate<span style="color:#f92672">.</span>resample(<span style="color:#e6db74">&#39;M&#39;</span>)<span style="color:#f92672">.</span>count()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">14</span>,<span style="color:#ae81ff">4</span>))
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#39;Customer NumStorePurchases by mounths&#39;</span>)
</span></span><span style="display:flex;"><span>groupedDate<span style="color:#f92672">.</span>NumStorePurchases<span style="color:#f92672">.</span>plot(kind<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;line&#39;</span>)
</span></span></code></pre></div><p>è‡ª2014å¹´6æœˆä»½ä»¥æ¥ç½‘ç«™çš„ç½‘ç«™è®¿é—®æ¬¡æ•°å’Œäº¤æ˜“æ€»é‡å‡ºç°äº†å¤§å¹…çš„ä¸‹æ»‘ã€‚é€šè¿‡ç½‘ç«™ã€ç›®å½•ã€å•†åº—ç›´æ¥è´­ä¹°çš„ä¸‰ä¸ªæ¸ é“éƒ½å‡ºç°äº†ç›¸åŒè½¨è¿¹çš„ä¸‹æ»‘ã€‚</p>
<h2 id="æ•°æ®é¢„å¤„ç†-1">æ•°æ®é¢„å¤„ç†<a hidden class="anchor" aria-hidden="true" href="#æ•°æ®é¢„å¤„ç†-1">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>s <span style="color:#f92672">=</span> (data<span style="color:#f92672">.</span>dtypes <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;object&#39;</span>)
</span></span><span style="display:flex;"><span>object_cols <span style="color:#f92672">=</span> list(s[s]<span style="color:#f92672">.</span>index)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;Categorical variables in the dataset:&#34;</span>, object_cols)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>LE<span style="color:#f92672">=</span>LabelEncoder()
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> object_cols:
</span></span><span style="display:flex;"><span>    data[i]<span style="color:#f92672">=</span>data[[i]]<span style="color:#f92672">.</span>apply(LE<span style="color:#f92672">.</span>fit_transform)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## ç›¸å…³æ€§çƒ­åŠ›å›¾</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>figure( figsize <span style="color:#f92672">=</span> (<span style="color:#ae81ff">14</span>, <span style="color:#ae81ff">14</span>))
</span></span><span style="display:flex;"><span>data1 <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>iloc[:, <span style="color:#ae81ff">1</span>:<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>sns<span style="color:#f92672">.</span>heatmap(data1<span style="color:#f92672">.</span>corr(), annot<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>, cmap<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Set2&#39;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>ds <span style="color:#f92672">=</span> data<span style="color:#f92672">.</span>copy()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cols_del <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;ID&#39;</span>, <span style="color:#e6db74">&#39;AcceptedCmp3&#39;</span>, <span style="color:#e6db74">&#39;AcceptedCmp4&#39;</span>, <span style="color:#e6db74">&#39;AcceptedCmp5&#39;</span>, <span style="color:#e6db74">&#39;AcceptedCmp1&#39;</span>,<span style="color:#e6db74">&#39;AcceptedCmp2&#39;</span>, 
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;Complain&#39;</span>, <span style="color:#e6db74">&#39;Response&#39;</span>, <span style="color:#e6db74">&#39;Have_Children&#39;</span>, <span style="color:#e6db74">&#39;Dt_Customer&#39;</span>,  <span style="color:#e6db74">&#39;Children&#39;</span>]
</span></span><span style="display:flex;"><span>ds <span style="color:#f92672">=</span> ds<span style="color:#f92672">.</span>drop(cols_del, axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## æ•°æ®æ ‡å‡†åŒ–</span>
</span></span><span style="display:flex;"><span>scaler <span style="color:#f92672">=</span> StandardScaler()
</span></span><span style="display:flex;"><span>scaler<span style="color:#f92672">.</span>fit(ds)
</span></span><span style="display:flex;"><span>scaled_ds <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(scaler<span style="color:#f92672">.</span>transform(ds),columns<span style="color:#f92672">=</span> ds<span style="color:#f92672">.</span>columns )
</span></span></code></pre></div><h2 id="pcaé™ç»´">PCAé™ç»´<a hidden class="anchor" aria-hidden="true" href="#pcaé™ç»´">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>pca <span style="color:#f92672">=</span> PCA(n_components<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>pca<span style="color:#f92672">.</span>fit(scaled_ds)
</span></span><span style="display:flex;"><span>PCA_ds <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(pca<span style="color:#f92672">.</span>transform(scaled_ds), columns<span style="color:#f92672">=</span>([<span style="color:#e6db74">&#34;col1&#34;</span>,<span style="color:#e6db74">&#34;col2&#34;</span>, <span style="color:#e6db74">&#34;col3&#34;</span>]))
</span></span><span style="display:flex;"><span>PCA_ds<span style="color:#f92672">.</span>describe()<span style="color:#f92672">.</span>T
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>x <span style="color:#f92672">=</span>PCA_ds[<span style="color:#e6db74">&#34;col1&#34;</span>]
</span></span><span style="display:flex;"><span>y <span style="color:#f92672">=</span>PCA_ds[<span style="color:#e6db74">&#34;col2&#34;</span>]
</span></span><span style="display:flex;"><span>z <span style="color:#f92672">=</span>PCA_ds[<span style="color:#e6db74">&#34;col3&#34;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## é™ç»´åæ•°æ®å¯è§†åŒ–</span>
</span></span><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">10</span>,<span style="color:#ae81ff">8</span>))
</span></span><span style="display:flex;"><span>ax <span style="color:#f92672">=</span> fig<span style="color:#f92672">.</span>add_subplot(<span style="color:#ae81ff">111</span>, projection<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;3d&#34;</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>scatter(x,y,z, marker<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;o&#34;</span> )
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#34;Data Visualization In The Reduced Dimension&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><h2 id="èšç±»">èšç±»<a hidden class="anchor" aria-hidden="true" href="#èšç±»">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>Elbow_M <span style="color:#f92672">=</span> KElbowVisualizer(KMeans(), k<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>Elbow_M<span style="color:#f92672">.</span>fit(PCA_ds)
</span></span><span style="display:flex;"><span>Elbow_M<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>AC <span style="color:#f92672">=</span> AgglomerativeClustering(n_clusters<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## æ‹Ÿåˆæ¨¡å‹å¹¶é¢„æµ‹èšç±»</span>
</span></span><span style="display:flex;"><span>yhat_AC <span style="color:#f92672">=</span> AC<span style="color:#f92672">.</span>fit_predict(PCA_ds)
</span></span><span style="display:flex;"><span>PCA_ds[<span style="color:#e6db74">&#34;Clusters&#34;</span>] <span style="color:#f92672">=</span> yhat_AC
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## å°†èšç±»ç‰¹å¾æ·»åŠ åˆ°åŸå§‹æ•°æ®</span>
</span></span><span style="display:flex;"><span>data[<span style="color:#e6db74">&#34;Clusters&#34;</span>]<span style="color:#f92672">=</span> yhat_AC
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## èšç±»ç»“æœå¯è§†åŒ–</span>
</span></span><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">10</span>,<span style="color:#ae81ff">8</span>))
</span></span><span style="display:flex;"><span>ax <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>subplot(<span style="color:#ae81ff">111</span>, projection<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;3d&#39;</span>, label<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bla&#34;</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>scatter(x, y, z, s<span style="color:#f92672">=</span><span style="color:#ae81ff">50</span>, c<span style="color:#f92672">=</span>PCA_ds[<span style="color:#e6db74">&#34;Clusters&#34;</span>], marker<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;o&#39;</span>, cmap <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Set2&#39;</span> )
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#34;The Plot Of The Clusters&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><h2 id="è¯„ä¼°æ¨¡å‹">è¯„ä¼°æ¨¡å‹<a hidden class="anchor" aria-hidden="true" href="#è¯„ä¼°æ¨¡å‹">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## èšç±»ç»“æœåˆ†å¸ƒå›¾</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">6</span>))
</span></span><span style="display:flex;"><span>pl <span style="color:#f92672">=</span> sns<span style="color:#f92672">.</span>countplot(x<span style="color:#f92672">=</span>data[<span style="color:#e6db74">&#34;Clusters&#34;</span>], palette<span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Set2&#39;</span>)
</span></span><span style="display:flex;"><span>pl<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#34;Distribution Of The Clusters&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## æŒ‰ç…§æ”¶å…¥å’Œæ”¯å‡ºå¯¹èšç±»ç»“æœè¿›è¡Œå¯è§†åŒ–</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">6</span>))
</span></span><span style="display:flex;"><span>pl <span style="color:#f92672">=</span> sns<span style="color:#f92672">.</span>scatterplot(data <span style="color:#f92672">=</span> data,x<span style="color:#f92672">=</span>data[<span style="color:#e6db74">&#34;Spent&#34;</span>], y<span style="color:#f92672">=</span>data[<span style="color:#e6db74">&#34;Income&#34;</span>],hue<span style="color:#f92672">=</span>data[<span style="color:#e6db74">&#34;Clusters&#34;</span>], palette<span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Set2&#39;</span>)
</span></span><span style="display:flex;"><span>pl<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#34;Cluster&#39;s Profile Based On Income And Spent&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>legend()
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><p><strong>æ”¶å…¥ä¸æ”¯å‡ºå›¾æ˜¾ç¤ºé›†ç¾¤æ¨¡å¼</strong></p>
<ul>
<li>ç¬¬ 0 ç»„ï¼šé«˜æ”¯å‡ºå’Œå¹³å‡æ”¶å…¥</li>
<li>ç¬¬ 1 ç»„ï¼šé«˜æ¶ˆè´¹å’Œé«˜æ”¶å…¥</li>
<li>ç¬¬ 2 ç»„ï¼šä½æ”¯å‡ºå’Œä½æ”¶å…¥</li>
<li>ç¬¬ 3 ç»„ï¼šé«˜æ”¯å‡ºå’Œä½æ”¶å…¥</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">12</span>,<span style="color:#ae81ff">6</span>))
</span></span><span style="display:flex;"><span>sns<span style="color:#f92672">.</span>swarmplot(x<span style="color:#f92672">=</span>data[<span style="color:#e6db74">&#34;Clusters&#34;</span>], y<span style="color:#f92672">=</span>data[<span style="color:#e6db74">&#34;Spent&#34;</span>], alpha<span style="color:#f92672">=</span><span style="color:#ae81ff">0.9</span>, palette<span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Set2&#39;</span> )
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">## æŒ‰ç…§èšç±»ç»“æœå¯¹æ´»åŠ¨æ€»æ¥å—æƒ…å†µè¿›è¡Œå¯è§†åŒ–</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">12</span>,<span style="color:#ae81ff">6</span>))
</span></span><span style="display:flex;"><span>pl <span style="color:#f92672">=</span> sns<span style="color:#f92672">.</span>countplot(x<span style="color:#f92672">=</span>data[<span style="color:#e6db74">&#34;TotalAcceptedCmp&#34;</span>],hue<span style="color:#f92672">=</span>data[<span style="color:#e6db74">&#34;Clusters&#34;</span>], palette<span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Set2&#39;</span>)
</span></span><span style="display:flex;"><span>pl<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#34;Count Of Promotion Accepted&#34;</span>)
</span></span><span style="display:flex;"><span>pl<span style="color:#f92672">.</span>set_xlabel(<span style="color:#e6db74">&#34;Number Of Total Accepted Promotions&#34;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://xin5835.github.io/tags/python/">Python</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://xin5835.github.io/post/%E4%BA%92%E8%81%94%E7%BD%91%E5%A4%A7%E5%8E%82%E9%BB%91%E5%8C%96190%E5%8F%A5/">
    <span class="title">Â« Prev</span>
    <br>
    <span>äº’è”ç½‘å¤§å‚é»‘åŒ–190å¥</span>
  </a>
  <a class="next" href="https://xin5835.github.io/post/%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F/">
    <span class="title">Next Â»</span>
    <br>
    <span>å‰ä¸–ä»Šç”Ÿ</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2026 <a href="https://xin5835.github.io/">Robert&#39;s Blog</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
